"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const get_url_1 = __importDefault(require("./get-url"));
const get_code_1 = __importDefault(require("./get-code"));
const content_types_1 = __importDefault(require("../assets/content-types"));
function register(proxy, tests) {
    const routes = [];
    tests.forEach(test => {
        if (test.isLegacy)
            return;
        test.clientScripts.forEach(script => {
            const route = get_url_1.default(script);
            proxy.GET(route, {
                content: get_code_1.default(script),
                contentType: content_types_1.default.javascript
            });
            routes.push(route);
        });
    });
    return routes;
}
exports.register = register;
function unRegister(proxy, routes) {
    routes.forEach(route => {
        proxy.unRegisterRoute(route, 'GET');
    });
}
exports.unRegister = unRegister;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jdXN0b20tY2xpZW50LXNjcmlwdHMvcm91dGluZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLHdEQUFpRDtBQUNqRCwwREFBbUQ7QUFDbkQsNEVBQW9EO0FBRXBELFNBQWdCLFFBQVEsQ0FBRSxLQUFLLEVBQUUsS0FBSztJQUNsQyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7SUFFbEIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNqQixJQUFJLElBQUksQ0FBQyxRQUFRO1lBQ2IsT0FBTztRQUVYLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ2hDLE1BQU0sS0FBSyxHQUFHLGlCQUF3QixDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRS9DLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFO2dCQUNiLE9BQU8sRUFBTSxrQkFBeUIsQ0FBQyxNQUFNLENBQUM7Z0JBQzlDLFdBQVcsRUFBRSx1QkFBYSxDQUFDLFVBQVU7YUFDeEMsQ0FBQyxDQUFDO1lBRUgsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTyxNQUFNLENBQUM7QUFDbEIsQ0FBQztBQXBCRCw0QkFvQkM7QUFFRCxTQUFnQixVQUFVLENBQUUsS0FBSyxFQUFFLE1BQU07SUFDckMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUNuQixLQUFLLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN4QyxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFKRCxnQ0FJQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBnZXRDdXN0b21DbGllbnRTY3JpcHRVcmwgZnJvbSAnLi9nZXQtdXJsJztcbmltcG9ydCBnZXRDdXN0b21DbGllbnRTY3JpcHRDb2RlIGZyb20gJy4vZ2V0LWNvZGUnO1xuaW1wb3J0IENPTlRFTlRfVFlQRVMgZnJvbSAnLi4vYXNzZXRzL2NvbnRlbnQtdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIgKHByb3h5LCB0ZXN0cykge1xuICAgIGNvbnN0IHJvdXRlcyA9IFtdO1xuXG4gICAgdGVzdHMuZm9yRWFjaCh0ZXN0ID0+IHtcbiAgICAgICAgaWYgKHRlc3QuaXNMZWdhY3kpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGVzdC5jbGllbnRTY3JpcHRzLmZvckVhY2goc2NyaXB0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gZ2V0Q3VzdG9tQ2xpZW50U2NyaXB0VXJsKHNjcmlwdCk7XG5cbiAgICAgICAgICAgIHByb3h5LkdFVChyb3V0ZSwge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICAgICBnZXRDdXN0b21DbGllbnRTY3JpcHRDb2RlKHNjcmlwdCksXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IENPTlRFTlRfVFlQRVMuamF2YXNjcmlwdFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJvdXRlcy5wdXNoKHJvdXRlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcm91dGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5SZWdpc3RlciAocHJveHksIHJvdXRlcykge1xuICAgIHJvdXRlcy5mb3JFYWNoKHJvdXRlID0+IHtcbiAgICAgICAgcHJveHkudW5SZWdpc3RlclJvdXRlKHJvdXRlLCAnR0VUJyk7XG4gICAgfSk7XG59XG4iXX0=