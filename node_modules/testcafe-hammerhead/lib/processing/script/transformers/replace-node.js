"use strict";

exports.__esModule = true;
exports.default = replaceNode;

// -------------------------------------------------------------
// WARNING: this file is used by both the client and the server.
// Do not use any browser or node-specific API!
// -------------------------------------------------------------

/*eslint-disable no-unused-vars*/

/*eslint-enable no-unused-vars*/
function replaceNode(node, newNode, parent, key) {
  if (Array.isArray(parent[key])) {
    if (node) {
      const idx = parent[key].indexOf(node);
      parent[key][idx] = newNode;
    } else parent[key].unshift(newNode);
  } else parent[key] = newNode;

  const newNodeWithLocation = newNode;
  const nodeWithLocation = node;
  const parentWithLocation = parent;

  if (node) {
    newNodeWithLocation.originStart = newNodeWithLocation.start = nodeWithLocation.start;
    newNodeWithLocation.originEnd = newNodeWithLocation.end = nodeWithLocation.end;
  } else newNodeWithLocation.originStart = newNodeWithLocation.originEnd = parentWithLocation.start + 1;
}

module.exports = exports.default;